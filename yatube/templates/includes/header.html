{% load static %}
{% with request.resolver_match.view_name as view_name %}
<meta charset="utf-8"> 
<nav class="navbar navbar-light" style="background-color: lightskyblue">
  <div class="container">
    <a class="navbar-brand" href="/">
      <img src="{% static 'img/logo.png' %}" width="30"
      height="30" class="d-inline-block align-top" alt="">
      <span style="color:red">Ya</span>tube
    </a>
    {% if user.is_authenticated %}
    <a type="button" class="btn btn-outline-light"
      href="{% url 'posts:profile' user.username %}">
        Пользователь: {{ user.username }}
    </a>
    {% endif %}
    <div class="dropdown">
      <button class="btn btn-secondary dropdown-toggle" 
        type="button" data-bs-toggle="dropdown" 
        aria-expanded="false">
        Навигация
      </button>
      <ul class="dropdown-menu">
        <li> 
          <a class="dropdown-item 
            {% if view_name  == 'about:author' %}
              active
            {% endif %}" 
            href="{% url 'about:author' %}">Об авторе</a>
        </li>
        <li>
          <a class="dropdown-item 
            {% if view_name  == 'about:tech' %}
              active
            {% endif %}"  
            href="{% url 'about:tech' %}">Технологии</a>
        </li>
        {% if user.is_authenticated %}
          <li> 
            <a class="dropdown-item
            {% if view_name  == 'posts:post_create' %}
              active
            {% endif %}" 
              href="{% url 'posts:post_create' %}">Новая запись</a>
          </li>
          <li> 
            <a class="dropdown-item
              {% if view_name  == 'users:password_change_form' %}
                active
              {% endif %}" 
              href="{% url 'users:password_change_form' %}">Изменить пароль</a>
          </li>
          <li> 
            <a class="dropdown-item
              {% if view_name  == 'users:logout' %}
                active
              {% endif %}" 
              href="{% url 'users:logout' %}">Выйти</a>
          </li>
          {% else %}
          <li> 
            <a class="dropdown-item
              {% if view_name  == 'users:login' %}
                active
              {% endif %}" 
              href="{% url 'users:login' %}">Войти</a>
          </li>
          <li> 
            <a class="dropdown-item
              {% if view_name  == 'users:signup' %}
                active
              {% endif %}" 
              href="{% url 'users:signup' %}">Регистрация</a>
          </li>
        {% endif %}
      </ul>
    </div>  
  </div>
</nav>   
{% endwith %}

